<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sistema de Tickets - Café 2025</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <style>
    body {
      background-color: #f4f4f4;
    }
    .container {
      max-width: 500px;
      margin-top: 50px;
    }
    .card {
      border-radius: 20px;
      box-shadow: 0px 4px 12px rgba(0, 0, 0, 0.1);
    }
    .form-control {
      border-radius: 12px;
    }
    button {
      border-radius: 12px;
    }
    h2 {
      text-align: center;
      margin-bottom: 20px;
    }
  </style>
</head>

<body>
  <div class="container">
    <div class="card p-4">
      <h2>Iniciar Sesión</h2>
      <form id="login-form">
        <div class="mb-3">
          <input type="email" id="login-email" class="form-control" placeholder="Correo electrónico" required>
        </div>
        <div class="mb-3">
          <input type="password" id="login-password" class="form-control" placeholder="Contraseña" required>
        </div>
        <button type="submit" class="btn btn-primary w-100">Iniciar Sesión</button>
      </form>
      <hr>
      <h2>Registrarse</h2>
      <form id="register-form">
        <div class="mb-3">
          <input type="email" id="register-email" class="form-control" placeholder="Correo electrónico" required>
        </div>
        <div class="mb-3">
          <input type="password" id="register-password" class="form-control" placeholder="Contraseña" required>
        </div>
        <button type="submit" class="btn btn-success w-100">Registrarse</button>
      </form>
    </div>
  </div>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.0/firebase-app.js";
    import { getAuth, signInWithEmailAndPassword, createUserWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/11.6.0/firebase-auth.js";

    const firebaseConfig = {
      apiKey: "AIzaSyCDx496WCv2ChVDacIkaA_xg70Hhpr-FpI",
      authDomain: "p-tickets-d8014.firebaseapp.com",
      projectId: "p-tickets-d8014",
      storageBucket: "p-tickets-d8014.firebasestorage.app",
      messagingSenderId: "114514664464",
      appId: "1:114514664464:web:a9718d6bc634e1d58dbe95"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth();

    const loginForm = document.getElementById('login-form');
    if (loginForm) {
      loginForm.addEventListener('submit', (e) => {
        e.preventDefault();
        const email = document.getElementById('login-email').value;
        const password = document.getElementById('login-password').value;

        signInWithEmailAndPassword(auth, email, password)
          .then((userCredential) => {
            const user = userCredential.user;
            Swal.fire('¡Bienvenido!', `Sesión iniciada con ${user.email}`, 'success');
          })
          .catch((error) => {
            console.error("Error en login:", error);
            Swal.fire('Error', error.message, 'error');
          });
      });
    }

    const registerForm = document.getElementById('register-form');
    if (registerForm) {
      registerForm.addEventListener('submit', (e) => {
        e.preventDefault();
        const email = document.getElementById('register-email').value;
        const password = document.getElementById('register-password').value;

        createUserWithEmailAndPassword(auth, email, password)
          .then((userCredential) => {
            const user = userCredential.user;
            Swal.fire('¡Registrado!', `Usuario creado: ${user.email}`, 'success');
          })
          .catch((error) => {
            console.error("Error en registro:", error);
            Swal.fire('Error', error.message, 'error');
          });
      });
    }
  </script>
</body>

</html>
